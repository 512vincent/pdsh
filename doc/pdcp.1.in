\." $Id$
.\"
.TH "@PROJECT@" "1" "@host_os@" "Version @VERSION@-@RELEASE@"
.SH NAME
pdcp \- copy files to groups of hosts in parallel
.SH SYNOPSIS
.B pdcp
.I "[-options] src [src2...] dest"
.br
.SH DESCRIPTION
.B pdcp
is a variant of the rcp(1) command.  Unlike rcp(1) which copies files to
a single remote host, pdcp(1) can copy files to multiple remote hosts in 
parallel.  Options are described in TARGET NODE LIST OPTIONS and OTHER OPTIONS 
below.
.LP
When pdcp receives SIGINT (ctrl-C), it lists the status of current threads.
A second SIGINT within one second terminates the program.

.SH TARGET NODE LIST OPTIONS

.I "-w host,host,..."
Target the specified hosts.  No spaces are allowed in the comma-separated
list.  A list consisting of a single "-" character causes the target 
hosts to be read from stdin, one per line.  The host list may contain 
hostname ranges of the form ``host[1-5]''. For more information about
hostname ranges, see the HOST RANGES section below.

.LP
.I "-x host,host,..."
Exclude the specified hosts.  May be specified in conjunction with other
target node list options such as -a. Hostname ranges may also be specified
to the -x option (see HOST RANGES section below)

.LP
.I "-a"
Target "all" nodes in the cluster.
.if @HAVE_SDR@ \{
.I "-v"
In combination with -a, eliminate nodes that the SDR thinks are down.
.LP
.I "-G"
In combination with -a, include all partitions. 
\}
.if @HAVE_GENDERS@ \{
.I "-g attribute"
Target nodes that have the specified genders attribute.	
\}
.LP
.I "-i"
In conjunction with -a or -g, request canonical hostnames.
The default is to use reliable hostnames.
.LP
If none of the above options are specified, the WCOLL environment variable
must point to a file that contains a list of nodes, one per line.  

.SH OTHER OPTIONS
.I "-r"
Copy recursively.
.LP
.I "-p"
Preserve modification time and modes.
.LP
.I "-q"
List option values and the target host list and exit without action.
.LP
.I "-f number"
Set the maximum number of simultaneous remote copies.  The default is 
@FANOUT@.
.LP
.I "-l user"
This option may be used to copy files as another user, subject to
authorization.  For BSD rcmd, this means the invoking user and system must
be listed in the user\'s .rhosts file (even for root).
.LP
.I "-t seconds"
Set the connect timeout.  Default is @CONNECT_TIMEOUT@ seconds.  
(This is in concurrent with the normal socket-level timeout).
.LP
.I "-d"
Include more complete thread status when SIGINT is received, and display
connect and command time statistics on stderr when done.

.SH "HOST RANGES"
As noted in sections above, 
.B pdcp 
accepts ranges of hostnames in
the general form: prefix[n-m,l-k,...], where n < m and l < k, etc.,
as an alternative to explicit lists of hosts.  This form should not
be confused with regular expression character classes (also denoted
by ``[]''). For example, foo[19] does not represent foo1 or foo9, but
rather represents a degenerate range: foo19. 

This range syntax is meant
only as a convenience on clusters with a prefixNN naming convention and
specification of ranges should not be considered necessary -- the list
foo1,foo9 could be specified as such, or by the range foo[1,9].

Some examples of range usage follow:

Copy /etc/hosts to foo01,foo02,...,foo05
    pdcp -w foo[01-05] /etc/hosts /etc

Copy /etc/hosts to foo7,foo9,foo10
    pdcp -w foo[7,9-10] /etc/hosts /etc

Copy /etc/hosts to foo0,foo4,foo5
    pdcp -w foo[0-5] -x foo[1-3] /etc/hosts /etc


.SH "LIMITATIONS"
.if @HAVE_SSH@ \{
This copy of pdsh has been configured to use
.B ssh
which causes the stderr of ssh to be folded in with that of the remote 
command.  When invoked by pdsh, it is not possible for ssh to prompt for 
confirmation if a host key changes, prompt for passwords if RSA keys are not 
configured properly, etc..  Finally, the connect timeout is not adjustable 
when ssh is used.
\}

.SH "FILES"
.if @HAVE_SSH@ @SSH@
.br
.if @HAVE_GENDERS@ @NODEATTR@
.br
.if @HAVE_SDR@ @SDRGETOBJECTS@
.br
.if @HAVE_MACHINES@ @MACHINES@
.br
@RCP@
.br

.SH "ORIGIN"
Pdsh/pdcp was originally a rewrite of IBM dsh(1) by Jim Garlick
.br
<garlick@llnl.gov>
on LLNL's ASCI Blue-Pacific IBM SP system.  
It is now also used on Linux clusters at LLNL.

.SH "SEE ALSO"
rcp(1), pdsh(1)
