\." $Id$
.\"
.TH PDSH 1 "Release 1.3" "LLNL" "PDSH"

.SH NAME
pdsh \- issue commands to groups of hosts in parallel

.SH SYNOPSIS
.B pdsh
.I "[-options] command"

.SH DESCRIPTION
.B pdsh
is a variant of the rsh(1) command.  Unlike rsh(1) which runs commands on
a single remote host, pdsh(1) can run multiple remote commands in parallel.
Options are described in TARGET NODE LIST OPTIONS and OTHER OPTIONS below.
.LP
When pdsh receives SIGINT (ctrl-C), it lists the status of current threads.
A second SIGINT within one second terminates the program.
.LP
The DSHPATH environment variable, if set, will be the PATH for the remote shell.
.LP
If a command is not specified on the command line, 
.B pdsh
runs interactively, prompting for commands and executing them when
terminated with a carriage return.  In interactive mode, target nodes that 
time out on the first command are not contacted for subsequent commands,
and commands prefaced with an exclamation point will be executed on the local 
system.

.SH TARGET NODE LIST OPTIONS
.I "-w host,host,..."
Target the specified nodes.  No spaces are allowed in the comma-separated
list.  Substituting the "-" character for the list causes the target nodes
to be read from stdin, one per line.
.LP
.I "-a"
Target "all" nodes in the cluster.  If running on an SP, this means all
nodes in your partition.  On a non-SP with genders support, this is all nodes
listed in your genders file.  Otherwise, it is all nodes in your MPICH
node list (see FILES below).
.LP
.I "-v"
(SP ONLY) In combination with -a, eliminate nodes that the SDR thinks are down.
.LP
.I "-i"
(SP or genders ONLY) In combination with -a or -g, use alternate node names.
On the SP, this means use SDR initial_hostname instead of the default 
reliable_hostname.  On non-SP's with genders, you must have 
.I "altname" 
attributes defined for each node.
.LP
.I "-G"
(SP ONLY) In combination with -a, include all partitions.
.LP
.I "-g attribute"
(Genders ONLY) Target nodes that have the specified attribute.
.LP
If none of the above options are specified, the WCOLL environment variable
must point to a file that contains a list of nodes, one per line.  

.SH OTHER OPTIONS
.I "-q"
List option values and the target nodes and exit without action.
.LP
.I "-f number"
Set the maximum number of simultaneous remote commands.  The default is 64.
.LP
.I "-s"
Separate stdout and stderr of the remote commands.  By default they are
combined into 
.B pdsh
stdout to conserve sockets and keep diagnostic output from 
.B pdsh 
separate from remote command output.
.LP
.I "-l user"
This option may be used to run remote comands as another user, subject to
authorization.  For BSD rcmd, this means the invoking user and system must
be listed in the user\'s .rhosts file (even for root).
.LP
.I "-t seconds"
Set the connect timeout.  Default is 5 seconds.  (This is in addition to
the socket-level timeout which may cause connect to fail sooner)
.LP
.I "-u seconds"
Put a limit on the amount of time a remote command is allowed to execute.
Default is no limit.
.LP
.I "-c"
In interactive mode, do not remove failed hosts from the target node list.
.LP
.I "-k"
(Kerberos IV ONLY) Use kerberized rcmd (default for root).
.LP
.I "-R"
(Kerberos IV ONLY) Use BSD rcmd (default for non-root)
.LP
.I "-e"
Use ssh to connect.
.LP
.I "-d"
Include more complete thread status when SIGINT is received, and display
connect and command time statistics on stderr when done.
.LP
.I "-S"
Return largest of the remote command return values.

.SH "FILES"
/usr/local/etc/machines
.br
/usr/lpp/ssp/bin/SDRGetObjects
.br
/usr/bin/nodeattr
.br
/usr/local/bin/ssh
.br
/usr/bin/rcp

.SH "ORIGIN"
Originally a rewrite of IBM dsh(1) by Jim Garlick <garlick@llnl.gov>
on LLNL's ASCI Blue-Pacific IBM SP system.  
It is now also used on Alpha Linux clusters at LLNL.

.SH "LIMITATIONS"
When 
.B ssh
is used, the stderr of ssh is folded in with that of the remote command 
(which, unless
.I "-s"
is used, will be combined with stdout).  When invoked by pdsh, it is 
not possible for ssh to prompt for confirmation if a host key changes, 
prompt for passwords if RSA keys are not configured properly, etc..
.LP
The connect timeout is not adjustable when ssh is used.
.SH "SEE ALSO"
rsh(1), ssh(1), dshbak(1), pdcp(1)
